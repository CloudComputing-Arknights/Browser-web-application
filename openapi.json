{"openapi":"3.1.0","info":{"title":"Composite API","description":"An API to orchestrate calls to other microservices.","version":"1.0.0"},"paths":{"/items/":{"get":{"tags":["Items"],"summary":"Get items through pagination.","description":"Get items through pagination, can be filtered by ID, category, condition, transaction type","operationId":"list_public_items_items__get","parameters":[{"name":"id","in":"query","required":false,"schema":{"anyOf":[{"type":"array","items":{"type":"string","format":"uuid"}},{"type":"null"}],"description":"Filter by a list of item IDs","title":"Id"},"description":"Filter by a list of item IDs"},{"name":"category_id","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"description":"Filter by item's category","title":"Category Id"},"description":"Filter by item's category"},{"name":"transaction_type","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/TransactionType"},{"type":"null"}],"description":"Filter by item's transaction type","title":"Transaction Type"},"description":"Filter by item's transaction type"},{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Search by item title (case-insensitive, partial match)","title":"Search"},"description":"Search by item title (case-insensitive, partial match)"},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Number of items to skip","default":0,"title":"Skip"},"description":"Number of items to skip"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Max number of items to return","default":10,"title":"Limit"},"description":"Max number of items to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ItemRead"},"title":"Response List Public Items Items  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/items/categories":{"get":{"tags":["Items"],"summary":"List Categories","operationId":"list_categories_items_categories_get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Number of items to skip","default":0,"title":"Skip"},"description":"Number of items to skip"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Max number of items to return","default":10,"title":"Limit"},"description":"Max number of items to return"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CategoryRead"},"title":"Response List Categories Items Categories Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/items/{item_id}":{"get":{"tags":["Items"],"summary":"Get an item by its id","description":"Get an item by its id","operationId":"get_public_item_by_id_items__item_id__get","parameters":[{"name":"item_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Item Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ItemRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/me/items":{"post":{"tags":["Item User"],"summary":"Create Item For Me","operationId":"create_item_for_me_me_items_post","security":[{"HTTPBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOwnItemReq"}}}},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Item User"],"summary":"List My Items","operationId":"list_my_items_me_items_get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/me/items/jobs/{job_id}":{"get":{"tags":["Item User"],"summary":"Check status of job, store item-user relation when job is COMPLETED","operationId":"get_my_job_status_me_items_jobs__job_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Job Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JobRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/me/items/{item_id}":{"patch":{"tags":["Item User"],"summary":"Update My Item","operationId":"update_my_item_me_items__item_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"item_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Item Id"}},{"name":"If-Match","in":"header","required":true,"schema":{"type":"string","description":"ETag required for concurrent update protection","title":"If-Match"},"description":"ETag required for concurrent update protection"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateOwnItemReq"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ItemRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Item User"],"summary":"Delete My Item","operationId":"delete_my_item_me_items__item_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"item_id","in":"path","required":true,"schema":{"type":"string","title":"Item Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/transactions/transaction":{"post":{"tags":["Transaction"],"summary":"Create Transaction","operationId":"create_transaction_transactions_transaction_post","parameters":[{"name":"X-Idempotency-Key","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"X-Idempotency-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTransactionReq"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionRes"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/transactions/{transaction_id}":{"get":{"tags":["Transaction"],"summary":"Get Transaction","operationId":"get_transaction_transactions__transaction_id__get","parameters":[{"name":"transaction_id","in":"path","required":true,"schema":{"type":"string","title":"Transaction Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionRes"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["Transaction"],"summary":"Update Transaction","operationId":"update_transaction_transactions__transaction_id__put","parameters":[{"name":"transaction_id","in":"path","required":true,"schema":{"type":"string","title":"Transaction Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateTransactionStatusReq"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionRes"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Transaction"],"summary":"Delete Transaction","operationId":"delete_transaction_transactions__transaction_id__delete","parameters":[{"name":"transaction_id","in":"path","required":true,"schema":{"type":"string","title":"Transaction Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TransactionRes"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/transactions":{"get":{"tags":["Transaction"],"summary":"List Transactions","operationId":"list_transactions_transactions_get","parameters":[{"name":"status_param","in":"query","required":false,"schema":{"anyOf":[{"enum":["pending","accepted","rejected","canceled","completed"],"type":"string"},{"type":"null"}],"title":"Status Param"}},{"name":"initiator_user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Initiator User Id"}},{"name":"receiver_user_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Receiver User Id"}},{"name":"requested_item_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Requested Item Id"}},{"name":"type","in":"query","required":false,"schema":{"anyOf":[{"enum":["trade","purchase"],"type":"string"},{"type":"null"}],"title":"Type"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":50,"title":"Limit"}},{"name":"offset","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Offset"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TransactionRes"},"title":"Response List Transactions Transactions Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/token":{"post":{"tags":["User"],"summary":"Sign In","operationId":"sign_in_token_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignInReq"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignInRes"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users":{"post":{"tags":["User"],"summary":"Create User","operationId":"create_user_users_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignUpReq"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignedInUserRes"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/me/user":{"get":{"tags":["User"],"summary":"Auth Me","operationId":"auth_me_me_user_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignedInUserRes"}}}}},"security":[{"HTTPBearer":[]}]}}},"components":{"schemas":{"AddressDTO":{"properties":{"id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Id"},"street":{"type":"string","title":"Street"},"city":{"type":"string","title":"City"},"country":{"type":"string","title":"Country"},"state":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"State"},"postal_code":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Postal Code"},"created_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"}},"type":"object","required":["street","city","country"],"title":"AddressDTO"},"CategoryRead":{"properties":{"name":{"type":"string","title":"Name"},"category_id":{"type":"integer","title":"Category Id"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"}},"additionalProperties":true,"type":"object","required":["name","category_id"],"title":"CategoryRead","description":"Representation of a Category returned from the server."},"ConditionType":{"type":"string","enum":["BRAND_NEW","GOOD","LIKE_NEW","POOR"],"title":"ConditionType"},"CreateOwnItemReq":{"properties":{"title":{"type":"string","title":"Title"},"condition":{"$ref":"#/components/schemas/ConditionType"},"transaction_type":{"$ref":"#/components/schemas/TransactionType"},"price":{"type":"number","title":"Price"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"address_UUID":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Address Uuid"},"image_urls":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Image Urls"},"category_ids":{"anyOf":[{"items":{"type":"integer"},"type":"array"},{"type":"null"}],"title":"Category Ids"}},"additionalProperties":true,"type":"object","required":["title","condition","transaction_type","price"],"title":"CreateOwnItemReq","description":"Request body from frontend."},"CreateTransactionReq":{"properties":{"requested_item_id":{"type":"string","title":"Requested Item Id"},"initiator_user_id":{"type":"string","title":"Initiator User Id"},"receiver_user_id":{"type":"string","title":"Receiver User Id"},"type":{"type":"string","enum":["trade","purchase"],"title":"Type"},"offered_item_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Offered Item Id"},"offered_price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Offered Price"},"status":{"type":"string","enum":["pending","accepted","rejected","canceled","completed"],"title":"Status","default":"pending"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"}},"type":"object","required":["requested_item_id","initiator_user_id","receiver_user_id","type"],"title":"CreateTransactionReq"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"ItemRead":{"properties":{"title":{"type":"string","title":"Title"},"condition":{"$ref":"#/components/schemas/ConditionType"},"transaction_type":{"$ref":"#/components/schemas/TransactionType"},"price":{"type":"number","title":"Price"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"address_UUID":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Address Uuid"},"image_urls":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Image Urls"},"item_UUID":{"type":"string","format":"uuid","title":"Item Uuid"},"categories":{"anyOf":[{"items":{"$ref":"#/components/schemas/CategoryRead"},"type":"array"},{"type":"null"}],"title":"Categories"},"created_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"}},"additionalProperties":true,"type":"object","required":["title","condition","transaction_type","price","item_UUID"],"title":"ItemRead","description":"Server representation returned to clients."},"JobRead":{"properties":{"job_UUID":{"type":"string","format":"uuid","title":"Job Uuid"},"status":{"$ref":"#/components/schemas/JobStatus"},"item_UUID":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Item Uuid"},"error_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Error Message"}},"type":"object","required":["job_UUID","status"],"title":"JobRead"},"JobStatus":{"type":"string","enum":["PENDING","RUNNING","COMPLETED","FAILED"],"title":"JobStatus"},"SignInReq":{"properties":{"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"}},"type":"object","required":["username","password"],"title":"SignInReq"},"SignInRes":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"}},"type":"object","required":["access_token"],"title":"SignInRes"},"SignUpReq":{"properties":{"username":{"type":"string","title":"Username"},"email":{"type":"string","title":"Email"},"password":{"type":"string","title":"Password"}},"type":"object","required":["username","email","password"],"title":"SignUpReq"},"SignedInUserRes":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"username":{"type":"string","title":"Username"},"email":{"type":"string","title":"Email"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"birth_date":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Birth Date"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url"},"addresses":{"items":{"$ref":"#/components/schemas/AddressDTO"},"type":"array","title":"Addresses"},"created_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Created At"},"updated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Updated At"}},"type":"object","required":["id","username","email"],"title":"SignedInUserRes"},"TransactionRes":{"properties":{"transaction_id":{"type":"string","title":"Transaction Id"},"requested_item_id":{"type":"string","title":"Requested Item Id"},"initiator_user_id":{"type":"string","title":"Initiator User Id"},"receiver_user_id":{"type":"string","title":"Receiver User Id"},"type":{"type":"string","enum":["trade","purchase"],"title":"Type"},"offered_item_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Offered Item Id"},"offered_price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Offered Price"},"status":{"type":"string","enum":["pending","accepted","rejected","canceled","completed"],"title":"Status"},"message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Message"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["transaction_id","requested_item_id","initiator_user_id","receiver_user_id","type","status","created_at","updated_at"],"title":"TransactionRes"},"TransactionType":{"type":"string","enum":["RENT","SALE"],"title":"TransactionType"},"UpdateOwnItemReq":{"properties":{"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"},"condition":{"anyOf":[{"$ref":"#/components/schemas/ConditionType"},{"type":"null"}]},"transaction_type":{"anyOf":[{"$ref":"#/components/schemas/TransactionType"},{"type":"null"}]},"price":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Price"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"category_ids":{"anyOf":[{"items":{"type":"integer"},"type":"array"},{"type":"null"}],"title":"Category Ids"},"address_UUID":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Address Uuid"},"image_urls":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Image Urls"}},"additionalProperties":true,"type":"object","title":"UpdateOwnItemReq"},"UpdateTransactionStatusReq":{"properties":{"status":{"type":"string","enum":["accepted","rejected","canceled","completed"],"title":"Status"}},"type":"object","required":["status"],"title":"UpdateTransactionStatusReq"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}